<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Design Principles for {datatagr} â€¢ datatagr</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Design Principles for {datatagr}">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">datatagr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/compat-dplyr.html">Compatibility with dplyr</a></li>
    <li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles for {datatagr}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/datatagr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Design Principles for {datatagr}</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/datatagr/blob/main/vignettes/design-principles.Rmd" class="external-link"><code>vignettes/design-principles.Rmd</code></a></small>
      <div class="d-none name"><code>design-principles.Rmd</code></div>
    </div>

    
    
<p>This vignette outlines the design decisions that have been taken
during the development of the <a href="https://epiverse-trace.github.io/datatagr/">datatagr</a> R package, and
provides some of the reasoning, and possible pros and cons of each
decision.</p>
<p>This document is primarily intended to be read by those interested in
understanding the code within the package and for potential package
contributors.</p>
<!-- Text in angular brackets (<>) is to guide what to include for each section please delete the guidelines and replace for your package.

None of the sections are required, feel free to remove any sections not relevant to your package or add new sections if helpful. -->
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p><strong>datatagr</strong> provides generic labelling and validation
tools. In contrast to the original versions of <strong>linelist</strong>
(<code>&lt;=v1.1.4</code>), datatagr functions at the variable level
instead of the object level.</p>
<p>The validation tooling is specific to type checking variables and
providing feedback on potential data loss or coercion. It does not aim
to do complex validations at this time.</p>
</div>
<div class="section level2">
<h2 id="naming-conventions">Naming conventions<a class="anchor" aria-label="anchor" href="#naming-conventions"></a>
</h2>
<p>We separate functions as much as is reasonable into their own files
under <code>R/</code>. If there are tests available for a file under
<code>R/</code>, it follows the convention of
<code>test-&lt;filename&gt;.R</code> under <code>tests/testthat/</code>.
Not all source code has respective tests.</p>
<p>We try to make function names as descriptive as possible, while
keeping them short. This is to make the package easy to use and
understand.</p>
</div>
<div class="section level2">
<h2 id="inputoutputinteroperability">Input/Output/Interoperability<a class="anchor" aria-label="anchor" href="#inputoutputinteroperability"></a>
</h2>
<p>Any data frame object can be passed into <strong>datatagr</strong>.
Output from datatagr remains a data frame object, with an additional
datatagr class attribute. This means it remains interoperable with all
the regular data frame operations one may attempt to do.</p>
<p><strong>datatagr</strong> is interoperable with pipes (that is,
<code>|&gt;</code> or <code>%&gt;%</code>). This allows for easy
chaining of functions. Note that there are no guarantees that label
attributes are preserved when piping or wrangling in another way. For
example, <strong>dplyr</strong> drops variable level attributes when
using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="design-decisions">Design decisions<a class="anchor" aria-label="anchor" href="#design-decisions"></a>
</h2>
<ul>
<li>
<strong>Generic</strong>: The package is designed to be a generic
tool for labelling and validating data. This is to ensure that the
package can be used in a wide range of contexts and is not limited to a
specific use case. Any specific use cases should be implemented in
separate packages.</li>
<li>
<strong>Local</strong>: We keep functions as local as possible. This
means operations should be as precise as is feasible, to be
non-destructive and ensure changes on one variable do not unexpectedly
affect another. This helps ensure the package is predictable and easy to
use + maintain.</li>
<li>
<strong>Minimize number of functions</strong>: We aim to keep the
number of functions in the package to a minimum. This helps usability
and maintainability.</li>
<li>
<strong>Base R</strong>: We aim to use base R functions where
possible. This is to ensure that the package is lightweight and does not
have many dependencies. This is for example why we do not use
<strong>labelled</strong> as the labelling package.</li>
</ul>
<p>If you feel like we did not uphold one of these design decisions,
please let us know ðŸ˜Š</p>
<div class="section level3">
<h3 id="quirks">Quirks<a class="anchor" aria-label="anchor" href="#quirks"></a>
</h3>
<p>Any package development has quirks. We outline quirks we are aware of
here:</p>
<ul>
<li>Currently, emptying labels leads to setting them to <code>""</code>
(empty character strings). Preferably we would end up setting them to
<code>NULL</code> in the end.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<ul>
<li>
<strong>checkmate</strong> - provide assertions for function
arguments</li>
<li>
<strong>lifecycle</strong> - help manage function lifecycle</li>
<li>
<strong>rlang</strong> - <code>...</code> to list parsing</li>
<li>
<strong>tidyselect</strong> - ensure we can use pipes in
<code><a href="../reference/has_label.html">has_label()</a></code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="development-journey">Development journey<a class="anchor" aria-label="anchor" href="#development-journey"></a>
</h2>
<p>The <strong>datatagr</strong> package is a major refactor of
<strong>linelist</strong> <code>v1.1.4</code>. The refactor was
necessary to make the package more generic and to make the codebase more
maintainable. The refactor was completed in a series of steps documented
in <a href="https://github.com/epiverse-trace/datatagr/pull/37" class="external-link">#37</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Hartgerink.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
